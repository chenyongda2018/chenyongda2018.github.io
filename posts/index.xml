<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Petrichor&#39;s blog</title>
    <link>https://chenyongda2018.github.io/posts/</link>
    <description>Recent content in Posts on Petrichor&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 14 May 2022 15:26:58 +0800</lastBuildDate><atom:link href="https://chenyongda2018.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Androidå†…å­˜æ³„æ¼æ¢ç©¶</title>
      <link>https://chenyongda2018.github.io/posts/android/android_memory_leak/</link>
      <pubDate>Sat, 14 May 2022 15:26:58 +0800</pubDate>
      
      <guid>https://chenyongda2018.github.io/posts/android/android_memory_leak/</guid>
      <description>ä¸€.ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ å†…å­˜æ³„æ¼ï¼ˆè‹±è¯­ï¼šMemory leakï¼‰æ˜¯åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œç”±äºç–å¿½æˆ–é”™è¯¯é€ æˆç¨‹åºæœªèƒ½é‡Šæ”¾å·²ç»ä¸å†ä½¿ç”¨çš„å†…å­˜ã€‚ â€” â€” â€” ç»´åŸºç™¾ç§‘
äºŒ.å†…å­˜æ³„æ¼çš„å½±å“ ä½¿å¾—åº”ç”¨ç¨‹åºå®¹æ˜“å‘ç”Ÿ OOM
Androidç³»ç»Ÿä¸ºæ¯ä¸ªåº”ç”¨åˆ†é…çš„å†…å­˜æœ‰é™ï¼Œè‹¥ç¨‹åºçš„å‘ç”Ÿçš„å†…å­˜æ³„æ¼è¾ƒå¤š,ä¼šå¯¼è‡´æ‰€éœ€çš„å†…å­˜è¶…è¿‡ç³»ç»Ÿæ‰€ç»™çš„é™é¢ã€‚ æœ€ç»ˆ:OOM â†’ Crash
ä¸‰. GC Roots å¯¹äºä½¿ç”¨å¯è¾¾æ€§åˆ†æçš„åƒåœ¾å›æ”¶ç®—æ³•æ¥è¯´ï¼ŒGC rootsæ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„å­˜åœ¨ï¼Œå®ƒç”¨æ¥å¸®åŠ©GCåˆ¤æ–­å“ªäº›å¯¹è±¡å¯ä»¥è¢«å›æ”¶ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡è¢«æ˜¯GC roots æˆ–è€…è¢«GC rootså¼•ç”¨å°±ä¸ä¼šè¢«å›æ”¶ã€‚
å“ªäº›å¯ä»¥ä½œä¸ºGC roots?
Class : è¢«ç³»ç»ŸClassLoaderåŠ è½½çš„class,è‡ªå®šä¹‰çš„ClassLoaderåŠ è½½çš„classä¸æ˜¯GC roots, æ³¨æ„:é™æ€å˜é‡æ˜¯å±äºç±»çš„ã€‚ Thread: å¤„äºæ´»åŠ¨çŠ¶æ€çš„çº¿ç¨‹. Stack Local: æ–¹æ³•ä¸­çš„å˜é‡å’Œå‚æ•°. JNI Local: JNIæ–¹æ³•ä¸­çš„å˜é‡å’Œå‚æ•°. JNI Global: å…¨å±€çš„JNI reference,ä¹Ÿå°±æ˜¯JNIä¸­å…¨å±€åˆ›å»ºçš„å¼•ç”¨. Monitor Used: åŒæ­¥çš„å¯¹è±¡,ä¾‹å¦‚è¢« Synchronized é”ä½çš„å¯¹è±¡. Held by JVM: å–å†³äºå„ä¸ªJVMçš„å®ç°,ç³»ç»Ÿçš„ClassLoaderå’ŒJVMæœ¬èº«ä¼šç”¨åˆ°çš„ä¸€äº›å¯¹è±¡. åœ¨å¼€å‘ä¸­æœ€å¸¸è§çš„å°±æ˜¯æ–¹æ³•ä¸­çš„å˜é‡ä½œä¸ºGC roots,å¦‚ä¸‹ä»£ç :
æˆ‘ä»¬åˆ›å»ºäº†80Må¤§å°çš„å†…å­˜åŒºåŸŸå¹¶ç”¨å˜é‡ bæŒ‡å‘è¿™å—åŒºåŸŸï¼Œç„¶åæˆ‘ä»¬è°ƒç”¨gcã€‚
åƒåœ¾å›æ”¶å™¨é¦–å…ˆè¿›è¡Œäº†ä¸€æ¬¡Minor GCï¼Œlogä¸­å¯ä»¥çœ‹åˆ°å¹´è½»ä»£ä»3932K é™åˆ°äº† 560Kï¼Œç„¶åå¯¹è±¡bè½¬ç§»åˆ°äº†è€å¹´ä»£ã€‚
éšååƒåœ¾å›æ”¶å™¨åˆè¿›è¡Œäº†ä¸€æ¬¡Full GC,è€å¹´ä»£ä¸­çš„å†…å­˜ä»81.9M é™åˆ° 439K, ä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆ›å»ºçš„80Må†…å­˜è¢«æ­£å¸¸å›æ”¶äº†ã€‚
å†çœ‹ä¸‹é¢ä¸€æ®µä»£ç 
å¯ä»¥çœ‹åˆ°åœ¨Full GCæ—¶,åˆ†é…çš„80Må†…å­˜å¹¶æ²¡æœ‰è¢«å›æ”¶ã€‚
åŸå› : ByteArrayå¯¹è±¡è¢«ä½œä¸ºGC rootsçš„å˜é‡bæŒæœ‰ï¼Œæ— æ³•è¢«å›æ”¶
å››.å†…å­˜æ³„æ¼ in Android å†…å­˜æ³„æ¼çš„æ ¹æœ¬åŸå› åœ¨äºå¯¹è±¡å§‹ç»ˆè¢«GC rootså¼•ç”¨ï¼Œæˆ–è€…æœ¬èº«ä½œä¸ºGC rootså½“ä¸åœ¨ä½¿ç”¨æ—¶æ²¡æœ‰æ­£ç¡®ç½®ç©ºæˆ–é‡Šæ”¾ã€‚</description>
    </item>
    
    <item>
      <title>Androidæ€§èƒ½ä¼˜åŒ–æ–‡ç« </title>
      <link>https://chenyongda2018.github.io/posts/android/android_performance/</link>
      <pubDate>Thu, 12 May 2022 19:43:48 +0800</pubDate>
      
      <guid>https://chenyongda2018.github.io/posts/android/android_performance/</guid>
      <description>1.å¸ƒå±€ä¼˜åŒ– æ·±å…¥æ¢ç´¢Androidå¸ƒå±€ä¼˜åŒ–ï¼ˆä¸Šï¼‰ æ·±å…¥æ¢ç´¢Androidå¸ƒå±€ä¼˜åŒ–ï¼ˆä¸­ï¼‰ æ·±å…¥æ¢ç´¢Androidå¸ƒå±€ä¼˜åŒ–ï¼ˆä¸‹ï¼‰ 2.ç»˜åˆ¶ä¼˜åŒ– Androidæ€§èƒ½ä¼˜åŒ–ä¹‹ç»˜åˆ¶ä¼˜åŒ– 3.å¡é¡¿ä¼˜åŒ– æ·±å…¥æ¢ç´¢Androidå¡é¡¿ä¼˜åŒ–ï¼ˆä¸Šï¼‰ æ·±å…¥æ¢ç´¢Androidå¡é¡¿ä¼˜åŒ–ï¼ˆä¸‹ï¼‰ 4.å†…å­˜ä¼˜åŒ– æ·±å…¥æ¢ç´¢ Android å†…å­˜ä¼˜åŒ–ï¼ˆç‚¼ç‹±çº§åˆ«-ä¸Šï¼‰ æ·±å…¥æ¢ç´¢ Android å†…å­˜ä¼˜åŒ–ï¼ˆç‚¼ç‹±çº§åˆ«-ä¸‹ï¼‰ 5.å¯åŠ¨é€Ÿåº¦ä¼˜åŒ– æ·±å…¥æ¢ç´¢Androidå¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ï¼ˆä¸Šï¼‰ æ·±å…¥æ¢ç´¢Androidå¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ï¼ˆä¸‹ï¼‰ 6.åŒ…ä½“ç§¯ä¼˜åŒ– æ·±å…¥æ¢ç´¢ Android åŒ…ä½“ç§¯ä¼˜åŒ–ï¼ˆåŒ å¿ƒåˆ¶ä½œ-ä¸Šï¼‰ æ·±å…¥æ¢ç´¢ Android åŒ…ä½“ç§¯ä¼˜åŒ–ï¼ˆåŒ å¿ƒåˆ¶ä½œ-ä¸‹ï¼‰ åŒ…ä½“ç§¯ä¼˜åŒ– Â· å·¥å…·è®º Â· åˆè¯†åŒ…ä½“ç§¯ä¼˜åŒ– åŒ…ä½“ç§¯ä¼˜åŒ– Â· æ–¹æ³•è®º Â· æ­å¼€åŒ…ä½“ç§¯ä¼˜åŒ–ç¥ç§˜é¢çº± åŒ…ä½“ç§¯ä¼˜åŒ– Â· å®æˆ˜è®º Â· æ€ä¹ˆåšåŒ…ä½“ç§¯ä¼˜åŒ–? åŒ…ä½“ç§¯ä¼˜åŒ– Â· å½©è›‹ç¯‡ Â· Androidç¼–è¯‘æœŸPNGè‡ªåŠ¨åŒ–è½¬æ¢WEBP 7.APM APMç›‘æ§ Â· å…¥é—¨ç¯‡ Â· Androidç«¯æµ‹ç›‘æ§å¹³å°å»ºè®¾ å¡é¡¿ç›‘æµ‹ Â· æ–¹æ¡ˆç¯‡ Â· Androidå¡é¡¿ç›‘æµ‹æŒ‡å¯¼åŸåˆ™ </description>
    </item>
    
    <item>
      <title>Kotlin Lambda</title>
      <link>https://chenyongda2018.github.io/posts/android/kotlin_lamdba/</link>
      <pubDate>Sat, 16 Apr 2022 15:48:16 +0800</pubDate>
      
      <guid>https://chenyongda2018.github.io/posts/android/kotlin_lamdba/</guid>
      <description>Kotlin lambda Kotlinä¸­ï¼Œå……æ–¥ç€å„ç§å„æ ·çš„Lambda è¡¨è¾¾å¼ï¼Œè¿™æ˜¯Kotlinæœ€æ–¹ä¾¿çš„ç‰¹æ€§ä¹‹ä¸€
äº†è§£Kotlin ä¸­çš„lambdaï¼Œé¦–å…ˆå¾—çŸ¥é“Kotlinä¸­çš„é«˜é˜¶å‡½æ•°
1.é«˜é˜¶å‡½æ•° åœ¨Javaä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªaæ–¹æ³•ï¼Œè¦å»è°ƒç”¨bæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨é‡Œé¢ç›´æ¥è°ƒç”¨å³å¯ã€‚
int a() { return b(1); } a(); æ¥ç€,å¦‚æœæˆ‘ä¸æƒ³æŠŠè°ƒç”¨bæ–¹æ³•çš„å‚æ•°å†™æ­»ï¼Œå¸Œæœ›åŠ¨æ€è®¾ç½®æ–¹æ³•bçš„å‚æ•°ã€‚
int a(int param) { return b(param); } a(1); a(2); è¿™äº›åœ¨Javaä¸­å¾ˆè½»æ¾å°±èƒ½åšåˆ°ï¼Œä¸è¿‡&amp;hellip; å¦‚æœæˆ‘ä»¬æƒ³åŠ¨æ€è®¾ç½®çš„ä¸æ˜¯æ–¹æ³•å‚æ•°ï¼Œè€Œæ˜¯æ–¹æ³•æœ¬èº«å‘¢ï¼Œæ¯”å¦‚åœ¨æ–¹æ³•aå†…æœ‰ä¸€å¤„å¯¹åˆ«çš„æ–¹æ³•çš„è°ƒç”¨ï¼Œè¿™ä¸ªæ–¹æ³•å¯èƒ½æ˜¯æ–¹æ³•b,æ–¹æ³•c,æ–¹æ³•d&amp;hellip;,è¯¥æ–¹æ³•çš„å‚æ•°ç±»å‹æ˜¯int,è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯intã€‚æ–¹æ³•aåœ¨æ‰§è¡Œæ—¶ï¼Œå…·ä½“éœ€è¦è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œèƒ½å¦åŠ¨æ€è®¾ç½®? ä¹Ÿå°±æ˜¯è¯´èƒ½å¦å°†ä¸€ä¸ªæ–¹æ³•ä½œä¸ºå‚æ•°ä¼ ç»™a?
é€šè¿‡æ¥å£
public interface Wrapper { int method(int param); } å°†è¿™ä¸ªæ¥å£ç±»å‹Wrapper ä½œä¸ºæ–¹æ³•açš„å‚æ•°
int a(Wrapper wrapper) { return wrapper.method(1); } a(wrapper1); a(wrapper2); ä¸¾ä¸ªæˆ‘ä»¬å¸¸è§çš„ä¾‹å­
åœ¨Androidé‡ŒViewçš„ç‚¹å‡»äº‹ä»¶
public class View { OnClickListener mOnClickListener; ... public void onTouchEvent(MotionEvent e) { ... mOnClickListener.onClick(this); ... } } OnClickListenerå°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç‚¹å‡»äº‹ä»¶çš„å†…å®¹å…¨åœ¨onClick()æ–¹æ³•é‡Œ
public interface OnClickListener { void onClick(View v); } æˆ‘ä»¬åœ¨ç»™Viewè®¾ç½®ç‚¹å‡»äº‹ä»¶æ—¶ï¼Œä¼ çš„å°±æ˜¯ä¸€ä¸ªOnClickListener,æœ¬è´¨ä¸Šè¿™æ ·ä¼ é€’çš„æ˜¯ä¸€ä¸ªç¨åä¼šè¢«è°ƒç”¨çš„onClick()æ–¹æ³•,ä¸€èˆ¬ç§°ä¹‹ä¸ºå›è°ƒ,ä¸è¿‡ç”±äºJavaä¸­ä¸å…è®¸ç›´æ¥ä¼ é€’æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦ç”¨æ¥å£åŒ…è£…ä¸€ä¸‹ã€‚</description>
    </item>
    
    <item>
      <title>Glideå­¦ä¹ ç¬”è®°</title>
      <link>https://chenyongda2018.github.io/posts/android/glide_study/</link>
      <pubDate>Thu, 14 Nov 2019 20:13:19 +0800</pubDate>
      
      <guid>https://chenyongda2018.github.io/posts/android/glide_study/</guid>
      <description>ä¸€.ä½¿ç”¨ 1.é…ç½®ä¾èµ– åœ¨ appÂ å±‚ build.gradleÂ ä¸­æ·»åŠ ä¾èµ– :Â dependencies { ... implementation &amp;#39;com.github.bumptech.glide:glide:4.9.0&amp;#39; annotationProcessor &amp;#39;com.github.bumptech.glide:compiler:4.9.0&amp;#39; annotationProcessor &amp;#39;androidx.annotation:annotation:1.1.0&amp;#39; ... } æ·»åŠ å¿…è¦æƒé™ :Â &amp;lt;uses-permission android:name=&amp;#34;android.permission.INTERNET&amp;#34;/&amp;gt; &amp;lt;uses-permission android:name=&amp;#34;android.permission.ACCESS_NETWORK_STATE&amp;#34;/&amp;gt; &amp;lt;uses-permission android:name=&amp;#34;android.permission.READ_EXTERNAL_STORAGE&amp;#34; /&amp;gt; &amp;lt;uses-permission android:name=&amp;#34;android.permission.WRITE_EXTERNAL_STORAGE&amp;#34; /&amp;gt; 2.åˆæ­¥ä¸Šæ‰‹ ä»£ç  :Â Glide.with(context) .asBitmap() //æŠŠåŠ¨å›¾å½“ä½œé™æ­¢å›¾ç‰‡å¤„ç†,ä¹Ÿå°±æ˜¯åªæ˜¾ç¤ºgifå›¾çš„ç¬¬ä¸€å¸§ .load(&amp;#34;https://pic2.zhimg.com/v2-c4970ee756c55333b7b871c5b617d9ed_b.gif&amp;#34;)//å›¾ç‰‡url .placeholder(R.mipmap.ic_launcher) //å ä½ç¬¦,åœ¨åŠ è½½å›¾ç‰‡å®Œæˆä¹‹å‰æ˜¾ç¤ºçš„å›¾ç‰‡ .error(R.drawable.ic_launcher_background) //åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºçš„å›¾ç‰‡ .fitCenter() //å½“å›¾ç‰‡é•¿å®½å¤§äºImageViewæ—¶,ç¼©æ”¾å›¾ç‰‡ .fallback(R.mipmap.ic_launcher) //å›¾ç‰‡urlä¸ºNullæ—¶æ˜¾ç¤ºçš„å›¾ç‰‡ .into(image1); // æ”¾å…¥åˆ°ImageViewä¸­ æ•ˆæœå›¾ :
ğŸˆTips : fitCenter()ä¸CenterCrop()åŒºåˆ« :Â fitCenter() : æ•ˆæœå¦‚ä¸Šå›¾,ç¼©æ”¾åŸå›¾è‡³ImageViewå¤§å°ã€‚ CenterCrop():å¦‚ä¸‹å›¾,ä¿æŒåŸå›¾ä¸å˜ï¼Œåªæ ¹æ®ImageViewå¤§å°æ˜¾ç¤ºå¯¹åº”éƒ¨åˆ†ã€‚ 3.é…åˆRecyclerViewæ˜¾ç¤ºå›¾ç‰‡åˆ—è¡¨ 1.éœ€è¦åŠ è½½çš„å›¾ç‰‡urlæ•°æ®æº
String[] mImageList = { &amp;#34;https://gss0.bdstatic.com/94o3dSag_xI4khGkpoWK1HF6hhy/baike/crop%3D0%2C231%2C438%&amp;#34; + &amp;#34;2C219%3BeWH%3D800%2C400/sign=b9c61bb42b3fb80e189e3b970be1031c/d50735fae6cd7b89267e2d06052442a7d9330e20.jpg&amp;#34;, &amp;#34;https://s3.ifanr.com/wp-content/uploads/2018/02/https_2F2Fhk.hypebeast.com2Ffiles2F20182F012Fdragon-ball-super-ending-anime-details-01-1.jpg&amp;#34;, &amp;#34;https://gss2.bdstatic.com/-fo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=999dccfe8082b90139adc431438ca97e/a1ec08fa513d26970f8fef845ffbb2fb4216d88f.jpg&amp;#34;, &amp;#34;http://img5.</description>
    </item>
    
  </channel>
</rss>
