<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
    
    
      <link href="/css/fonts.css" rel="stylesheet" type="text/css">
    
  

  
  <title>Kotlin Lambda</title>

  
  
  <link rel="stylesheet" href="/css/hugo-octopress.css">

  
  

  
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  

  
  
    <link href="https://chenyongda2018.github.io/newfav.png" rel="icon">
  

  
  

  <meta name="description" content="" />
  <meta name="keywords" content="">
  <meta name="author" content="Petrichor">

  
  <meta name="generator" content="Hugo 0.115.1">

  
  

  
  



</head>
<body>


<header role="banner">
<hgroup>
  
  <h1><a href="https://chenyongda2018.github.io/">Petrichor&#39;s blog</a></h1>
    <h2>Android developer.</h2>
</hgroup></header>


<nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigateâ€¦</option>
      
        <option value="https://chenyongda2018.github.io/">Â» HomePage</option>
      
        <option value="https://chenyongda2018.github.io/">Â» Site&#39;s Home Page</option>
      
        <option value="https://www.github.com/parsiya/hugo-octopress">Â» This theme on Github</option>
      
  </select>
</fieldset>


<ul class="main-navigation">
  
  
    
      <li><a href="https://chenyongda2018.github.io/" title="HomePage">HomePage</a></li>
    
  
    
      <li><a href="https://chenyongda2018.github.io/" title="Site&#39;s Home Page">Site&#39;s Home Page</a></li>
    
  
    
      <li><a href="https://www.github.com/parsiya/hugo-octopress" title="This theme on Github"  target="_blank"  rel="noopener noreferrer">This theme on Github</a></li>
    
  
</ul>

<ul class="subscription">
  
    
        <a href="https://chenyongda2018.github.io/index.xml" target="_blank" type="application/rss+xml" title="RSS" rel="noopener noreferrer"><i class="fa fa-rss-square fa-lg"></i></a>
    
  
</ul>


  <form action="https://www.google.com/search" method="get" target="_blank" rel="noopener noreferrer">
    <fieldset role="search">
      <input class="search" type="text" name="q" results="0" placeholder="Search"/>
      <input type="hidden" name="q" value="site:https://chenyongda2018.github.io/" />
    </fieldset>
  </form>

</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry" role="article">

        
        

<header>
  <p class="meta">Apr 16, 2022
     - 2 minute read 
    

    
    
      - <a class="label" href="https://chenyongda2018.github.io/categories/android/">Android </a>
    
  </p>
  <h1 class="entry-title">
     Kotlin Lambda 
  </h1>
</header>


        <div class="entry-content">
          
          
          
            <nav id="TableOfContents">
  <ul>
    <li><a href="#kotlin-lambda">Kotlin lambda</a>
      <ul>
        <li><a href="#1é«˜é˜¶å‡½æ•°">1.é«˜é˜¶å‡½æ•°</a></li>
        <li><a href="#2-lambdaè¡¨è¾¾å¼">2. Lambdaè¡¨è¾¾å¼</a></li>
        <li><a href="#3-ä¸ºä»€ä¹ˆkotlinä¸­å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¢«ä¼ é€’">3. ä¸ºä»€ä¹ˆKotlinä¸­å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¢«ä¼ é€’?</a></li>
        <li><a href="#4inlineå†…è”å‡½æ•°">4.inlineå†…è”å‡½æ•°</a></li>
      </ul>
    </li>
  </ul>
</nav>
          
          <h1 id="kotlin-lambda">Kotlin lambda</h1>
<p>Kotlinä¸­ï¼Œå……æ–¥ç€å„ç§å„æ ·çš„<code>Lambda</code> è¡¨è¾¾å¼ï¼Œè¿™æ˜¯Kotlinæœ€æ–¹ä¾¿çš„ç‰¹æ€§ä¹‹ä¸€</p>
<p>äº†è§£Kotlin ä¸­çš„<code>lambda</code>ï¼Œé¦–å…ˆå¾—çŸ¥é“Kotlinä¸­çš„<code>é«˜é˜¶å‡½æ•°</code></p>
<hr>
<h2 id="1é«˜é˜¶å‡½æ•°">1.é«˜é˜¶å‡½æ•°</h2>
<p>åœ¨Javaä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªaæ–¹æ³•ï¼Œè¦å»è°ƒç”¨bæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨é‡Œé¢ç›´æ¥è°ƒç”¨å³å¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#dc322f">int</span> <span style="color:#268bd2">a</span><span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">return</span> b<span style="color:#719e07">(</span><span style="color:#2aa198">1</span><span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>a<span style="color:#719e07">();</span>
</span></span></code></pre></div><p>æ¥ç€,å¦‚æœæˆ‘ä¸æƒ³æŠŠè°ƒç”¨bæ–¹æ³•çš„å‚æ•°å†™æ­»ï¼Œå¸Œæœ›åŠ¨æ€è®¾ç½®æ–¹æ³•bçš„å‚æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#dc322f">int</span> <span style="color:#268bd2">a</span><span style="color:#719e07">(</span><span style="color:#dc322f">int</span> param<span style="color:#719e07">)</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">return</span> b<span style="color:#719e07">(</span>param<span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>a<span style="color:#719e07">(</span><span style="color:#2aa198">1</span><span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span>a<span style="color:#719e07">(</span><span style="color:#2aa198">2</span><span style="color:#719e07">);</span>
</span></span></code></pre></div><p>è¿™äº›åœ¨Javaä¸­å¾ˆè½»æ¾å°±èƒ½åšåˆ°ï¼Œä¸è¿‡&hellip;
å¦‚æœæˆ‘ä»¬æƒ³åŠ¨æ€è®¾ç½®çš„ä¸æ˜¯æ–¹æ³•å‚æ•°ï¼Œè€Œæ˜¯æ–¹æ³•æœ¬èº«å‘¢ï¼Œæ¯”å¦‚åœ¨æ–¹æ³•aå†…æœ‰ä¸€å¤„å¯¹åˆ«çš„æ–¹æ³•çš„è°ƒç”¨ï¼Œè¿™ä¸ªæ–¹æ³•å¯èƒ½æ˜¯æ–¹æ³•b,æ–¹æ³•c,æ–¹æ³•d&hellip;,è¯¥æ–¹æ³•çš„å‚æ•°ç±»å‹æ˜¯int,è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯intã€‚æ–¹æ³•aåœ¨æ‰§è¡Œæ—¶ï¼Œå…·ä½“éœ€è¦è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œèƒ½å¦åŠ¨æ€è®¾ç½®? ä¹Ÿå°±æ˜¯è¯´èƒ½å¦å°†ä¸€ä¸ªæ–¹æ³•ä½œä¸ºå‚æ•°ä¼ ç»™a?</p>
<p>é€šè¿‡æ¥å£</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#268bd2">public</span> <span style="color:#268bd2">interface</span> <span style="color:#268bd2">Wrapper</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#dc322f">int</span> <span style="color:#268bd2">method</span><span style="color:#719e07">(</span><span style="color:#dc322f">int</span> param<span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span></code></pre></div><p>å°†è¿™ä¸ªæ¥å£ç±»å‹<code>Wrapper</code> ä½œä¸ºæ–¹æ³•açš„å‚æ•°</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#dc322f">int</span> <span style="color:#268bd2">a</span><span style="color:#719e07">(</span>Wrapper wrapper<span style="color:#719e07">)</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">return</span> wrapper<span style="color:#719e07">.</span>method<span style="color:#719e07">(</span><span style="color:#2aa198">1</span><span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>a<span style="color:#719e07">(</span>wrapper1<span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span>a<span style="color:#719e07">(</span>wrapper2<span style="color:#719e07">);</span>
</span></span></code></pre></div><p>ä¸¾ä¸ªæˆ‘ä»¬å¸¸è§çš„ä¾‹å­</p>
<p>åœ¨Androidé‡ŒViewçš„ç‚¹å‡»äº‹ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#268bd2">public</span> <span style="color:#268bd2">class</span> <span style="color:#268bd2">View</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  OnClickListener mOnClickListener<span style="color:#719e07">;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">public</span> <span style="color:#dc322f">void</span> <span style="color:#268bd2">onTouchEvent</span><span style="color:#719e07">(</span>MotionEvent e<span style="color:#719e07">)</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">...</span>
</span></span><span style="display:flex;"><span>    mOnClickListener<span style="color:#719e07">.</span>onClick<span style="color:#719e07">(</span><span style="color:#719e07">this</span><span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">...</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span></code></pre></div><p><code>OnClickListener</code>å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç‚¹å‡»äº‹ä»¶çš„å†…å®¹å…¨åœ¨<code>onClick()</code>æ–¹æ³•é‡Œ</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#268bd2">public</span> <span style="color:#268bd2">interface</span> <span style="color:#268bd2">OnClickListener</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#dc322f">void</span> <span style="color:#268bd2">onClick</span><span style="color:#719e07">(</span>View v<span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span></code></pre></div><p>æˆ‘ä»¬åœ¨ç»™Viewè®¾ç½®ç‚¹å‡»äº‹ä»¶æ—¶ï¼Œä¼ çš„å°±æ˜¯ä¸€ä¸ªOnClickListener,æœ¬è´¨ä¸Šè¿™æ ·ä¼ é€’çš„æ˜¯ä¸€ä¸ªç¨åä¼šè¢«è°ƒç”¨çš„<code>onClick()</code>æ–¹æ³•,ä¸€èˆ¬ç§°ä¹‹ä¸º<code>å›è°ƒ</code>,ä¸è¿‡ç”±äºJavaä¸­ä¸å…è®¸ç›´æ¥ä¼ é€’æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦ç”¨æ¥å£åŒ…è£…ä¸€ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>OnClickListener listener1 <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> OnClickListener<span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#268bd2">@Override</span>
</span></span><span style="display:flex;"><span>  <span style="color:#dc322f">void</span> <span style="color:#268bd2">onClick</span><span style="color:#719e07">(</span>View v<span style="color:#719e07">)</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>    doSomething<span style="color:#719e07">();</span>
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">};</span>
</span></span><span style="display:flex;"><span>view<span style="color:#719e07">.</span>setOnClickListener<span style="color:#719e07">(</span>listener1<span style="color:#719e07">);</span>
</span></span></code></pre></div><p>åœ¨Kotliné‡Œï¼Œå‡½æ•°æ˜¯å¯ä»¥ä½œä¸ºä¸€ä¸ªå‚æ•°è¢«ä¼ é€’çš„ :</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#719e07">fun</span> <span style="color:#268bd2">setOnClickListener</span>(onClick: (View) <span style="color:#719e07">-&gt;</span> Unit) {
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">this</span>.onClick = onClick
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>                         ğŸ‘‡ä¼ å…¥ä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œå‚æ•°ç±»å‹æ—¶View,æ— è¿”å›å€¼                        
</span></span><span style="display:flex;"><span>view.setOnClickListener(<span style="color:#719e07">fun</span>(v: View): Unit) {
</span></span><span style="display:flex;"><span>  doSomething()
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>è¿™ç§ <code>å‚æ•°æˆ–è€…è¿”å›å€¼æ˜¯å‡½æ•°</code>çš„å‡½æ•° åœ¨Kotlinä¸­ç§°ä¹‹ä¸º<code>é«˜é˜¶å‡½æ•°(Higher-Order-Functions)</code></p>
<h2 id="2-lambdaè¡¨è¾¾å¼">2. Lambdaè¡¨è¾¾å¼</h2>
<p>åœ¨åˆšåˆšçš„ä»£ç ä¸­ï¼Œä¼ å…¥çš„åŒ¿åå‡½æ•°è¿˜èƒ½è¿›ä¸€æ­¥ç®€åŒ–ï¼Œå†™æˆ<code>Lambda</code>è¡¨è¾¾å¼çš„å½¢å¼</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>                         ğŸ‘‡ç®€åŒ–åçš„åŒ¿åæ–¹æ³•                       
</span></span><span style="display:flex;"><span>view.setOnClickListener( { v: View <span style="color:#719e07">-&gt;</span>
</span></span><span style="display:flex;"><span>  doSomething()
</span></span><span style="display:flex;"><span>} )
</span></span></code></pre></div><p>Kotlinå…è®¸å¦‚æœ<code>Lambda</code> æ˜¯æœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œ<code>Lambda</code>å¯ä»¥å†™åœ¨æ–¹æ³•()çš„å¤–é¢ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>view.setOnClickListener() { v: View <span style="color:#719e07">-&gt;</span>
</span></span><span style="display:flex;"><span>  doSomething()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å¦‚æœè¯¥<code>Lambda</code> æ˜¯å”¯ä¸€çš„å‚æ•°ï¼Œåˆ™æ–¹æ³•()å¯ä»¥çœç•¥</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>view.setOnClickListener { v: View <span style="color:#719e07">-&gt;</span>
</span></span><span style="display:flex;"><span>  doSomething()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿›ä¸€æ­¥ï¼Œå¦‚æœè¯¥<code>Lambda</code> åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°è¿˜å¯ä»¥çœç•¥ä¸å†™, Kotlinä¸ºè¿™ç§å”¯ä¸€å‚æ•°æä¾›äº†é»˜è®¤çš„åå­—<code>it</code></p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>view.setOnClickListener { 
</span></span><span style="display:flex;"><span>  doSomething()
</span></span><span style="display:flex;"><span>  <span style="color:#719e07">it</span>.visibility = GONE
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="3-ä¸ºä»€ä¹ˆkotlinä¸­å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¢«ä¼ é€’">3. ä¸ºä»€ä¹ˆKotlinä¸­å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¢«ä¼ é€’?</h2>
<p>å°†åˆšæ‰çš„ä»£ç ï¼Œåç¼–è¯‘ä¸ºJava:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>                                      ğŸ‘‡å®é™…ä¼ é€’çš„æ˜¯FunctionNç±»å‹çš„å¯¹è±¡
</span></span><span style="display:flex;"><span><span style="color:#268bd2">public</span> <span style="color:#268bd2">static</span> <span style="color:#268bd2">final</span> String <span style="color:#268bd2">a</span><span style="color:#719e07">(</span><span style="color:#268bd2">@NotNull</span> Function1 funParam<span style="color:#719e07">)</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>      Intrinsics<span style="color:#719e07">.</span>checkNotNullParameter<span style="color:#719e07">(</span>funParam<span style="color:#719e07">,</span> <span style="color:#2aa198">&#34;funParam&#34;</span><span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span>      <span style="color:#719e07">return</span> <span style="color:#719e07">(</span>String<span style="color:#719e07">)</span>funParam<span style="color:#719e07">.</span>invoke<span style="color:#719e07">(</span><span style="color:#2aa198">1</span><span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#719e07">interface</span> <span style="color:#268bd2">FunctionN</span>&lt;<span style="color:#719e07">out</span> R&gt; : Function&lt;R&gt;, FunctionBase&lt;R&gt; {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">operator</span> <span style="color:#719e07">fun</span> <span style="color:#268bd2">invoke</span>(<span style="color:#719e07">vararg</span> args: Any?): R
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">override</span> <span style="color:#719e07">val</span> arity: Int
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p>æ‰€ä»¥ï¼Œä¹‹æ‰€ä»¥Kotlinä¸­æ–¹æ³•å¯ä»¥è¢«å½“ä½œå‚æ•° è¿›è¡Œä¼ é€’ï¼Œæ˜¯å› ä¸ºå®ƒå®é™…ä¸€ä¸ªFunctionNç±»å‹çš„å®å®åœ¨åœ¨çš„å¯¹è±¡</p>
</blockquote>
<p>å¯¹åº”å…³ç³»:</p>
<table>
<thead>
<tr>
<th>è¡¨è¾¾å¼</th>
<th>FunctionN</th>
</tr>
</thead>
<tbody>
<tr>
<td>(String) -&gt; Unit</td>
<td>Function1&lt;String,Int&gt;</td>
</tr>
<tr>
<td>(String,Int) -&gt; Double</td>
<td>Function2&lt;String,Int,Double&gt;</td>
</tr>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
<tr>
<td>(å‚æ•°1ç±»å‹,å‚æ•°2ç±»å‹..å‚æ•°nç±»å‹) -&gt; è¿”å›å€¼ç±»å‹</td>
<td>FunctionN&lt;å‚æ•°1ç±»å‹,&hellip;,å‚æ•°nç±»å‹,è¿”å›å€¼ç±»å‹&gt;</td>
</tr>
</tbody>
</table>
<h2 id="4inlineå†…è”å‡½æ•°">4.inlineå†…è”å‡½æ•°</h2>
<p>é›†åˆæ“ä½œç¬¦ filter å¯ä»¥å®šä¹‰è§„åˆ™å¯¹é›†åˆè¿›è¡Œè¿‡æ»¤</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>listOf(<span style="color:#2aa198">1</span>,<span style="color:#2aa198">2</span>,<span style="color:#2aa198">3</span>,<span style="color:#2aa198">4</span>,<span style="color:#2aa198">5</span>,<span style="color:#2aa198">6</span>).filter {<span style="color:#719e07">it</span> &gt; <span style="color:#2aa198">2</span>}
</span></span></code></pre></div><p>çœ‹ä¸€ä¸‹ filter æ–¹æ³•çš„å£°æ˜</p>
<pre tabindex="0"><code class="language-kotiln" data-lang="kotiln">public inline fun &lt;T&gt; Iterable&lt;T&gt;.filter(predicate: (T) -&gt; Boolean): List&lt;T&gt; {
    return filterTo(ArrayList&lt;T&gt;(), predicate)
}
</code></pre><div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#719e07">public</span> <span style="color:#719e07">inline</span> <span style="color:#719e07">fun</span> &lt;<span style="color:#268bd2">T</span>, <span style="color:#268bd2">C</span> : <span style="color:#268bd2">MutableCollection</span>&lt;<span style="color:#719e07">in</span> <span style="color:#268bd2">T</span>&gt;&gt; <span style="color:#268bd2">Iterable</span>&lt;T&gt;.filterTo(destination: C, predicate: (T) <span style="color:#719e07">-&gt;</span> Boolean): C {
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">for</span> (element <span style="color:#719e07">in</span> <span style="color:#719e07">this</span>) <span style="color:#719e07">if</span> (predicate(element)) destination.add(element)
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">return</span> destination
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>filteræ–¹æ³•æ¥æ”¶ä¸€ä¸ª å‡½æ•°ç±»å‹çš„å‚æ•°ï¼Œå¹¶ä¸”è¿”å›å€¼æ˜¯booleanï¼Œç¬¦åˆä½¿ç”¨lambdaçš„åœºæ™¯ï¼Œä¸Šé¢æˆ‘ä»¬è¯´è¿‡ï¼Œlamdbaæ˜¯å®ç°äº†FunctionNæ¥å£çš„å¯¹è±¡ã€‚
å¦‚æœé›†åˆé‡Œæœ‰æˆç™¾ä¸Šåƒä¸ªå…ƒç´ ï¼Œé‚£æ¯æ¬¡ç»è¿‡filter éƒ½ä¼šç”ŸæˆåŒ¿åå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªä¸å®¹å¿½è§†çš„å¼€é”€,å¼•èµ·æ€§èƒ½é—®é¢˜ã€‚
æ‰€ä»¥,Kotlinä¸­å¼•å…¥äº†å†…è”å‡½æ•°çš„æ¦‚å¿µ:</p>
<blockquote>
<p>å†…è”å‡½æ•°å›æŠŠå‡½æ•°çš„å®ç°ç›´æ¥æ‹·è´çš„è°ƒç”¨å¤„,é¿å…åˆ›å»ºåŒ¿åå†…éƒ¨ç±»ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#719e07">inline</span> <span style="color:#719e07">fun</span> <span style="color:#268bd2">inlined</span>(getString: () <span style="color:#719e07">-&gt;</span> String) = println(getString()) 
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#719e07">fun</span> <span style="color:#268bd2">notInlined</span>(getString: () <span style="color:#719e07">-&gt;</span> String) = println(getString())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">fun</span> <span style="color:#268bd2">test</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">var</span> testVar = <span style="color:#2aa198">&#34;Test&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    notInlined { testVar }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    inlined { testVar }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç¼–è¯‘åçš„javaä»£ç :</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#268bd2">public</span> <span style="color:#268bd2">static</span> <span style="color:#268bd2">final</span> <span style="color:#dc322f">void</span> <span style="color:#268bd2">test</span><span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#268bd2">final</span> ObjectRef testVar <span style="color:#719e07">=</span> <span style="color:#719e07">new</span> ObjectRef<span style="color:#719e07">();</span>
</span></span><span style="display:flex;"><span>    testVar<span style="color:#719e07">.</span>element <span style="color:#719e07">=</span> <span style="color:#2aa198">&#34;Test Variable&#34;</span><span style="color:#719e07">;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#586e75">// notInlined:
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>    <span style="color:#586e75">//æ¯ä¸ªé—­åŒ… lamdba éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ä¼šé¢å¤–åˆ†é…å†…å­˜ï¼Œå½±å“è¿è¡Œæ—¶é—´
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>    notInlined<span style="color:#719e07">((</span>Function0<span style="color:#719e07">)(</span><span style="color:#719e07">new</span> Function0<span style="color:#719e07">(</span><span style="color:#2aa198">0</span><span style="color:#719e07">)</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#268bd2">public</span> Object <span style="color:#268bd2">invoke</span><span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#719e07">return</span> <span style="color:#719e07">this</span><span style="color:#719e07">.</span>invoke<span style="color:#719e07">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>        <span style="color:#268bd2">@NotNull</span>
</span></span><span style="display:flex;"><span>        <span style="color:#268bd2">public</span> <span style="color:#268bd2">final</span> String <span style="color:#268bd2">invoke</span><span style="color:#719e07">()</span> <span style="color:#719e07">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#719e07">return</span> <span style="color:#719e07">(</span>String<span style="color:#719e07">)</span>testVar<span style="color:#719e07">.</span>element<span style="color:#719e07">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#719e07">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#719e07">}));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#586e75">// inlined:ä¼šç›´æ¥å°†æ–¹æ³•ä½“å¤åˆ¶åˆ°è°ƒç”¨å¤„ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#586e75"></span>    String var3 <span style="color:#719e07">=</span> <span style="color:#719e07">(</span>String<span style="color:#719e07">)</span>testVar<span style="color:#719e07">.</span>element<span style="color:#719e07">;</span>
</span></span><span style="display:flex;"><span>    System<span style="color:#719e07">.</span>out<span style="color:#719e07">.</span>println<span style="color:#719e07">(</span>var3<span style="color:#719e07">);</span>
</span></span><span style="display:flex;"><span><span style="color:#719e07">}</span>
</span></span></code></pre></div><blockquote>
<p>åœ¨ kotlin ä¸­ï¼Œå› ä¸ºå‡ºç°äº†å¤§é‡çš„å¸¦ lamdbaçš„ é«˜é˜¶å‡½æ•° &ndash; ã€Œé«˜é˜¶å‡½æ•°æ˜¯å°†å‡½æ•°ç”¨ä½œå‚æ•°æˆ–è¿”å›å€¼çš„å‡½æ•°ã€ï¼Œä½¿å¾—è¶Šæ¥è¶Šå¤šçš„åœ°æ–¹å‡ºç° å‡½æ•°å‚æ•° ä¸æ–­ä¼ é€’çš„ç°è±¡ï¼Œæ¯ä¸€ä¸ªå‡½æ•°å‚æ•°éƒ½ä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªå¯¹è±¡ï¼Œ ä½¿å¾—å†…å­˜åˆ†é…ï¼ˆå¯¹äºå‡½æ•°å¯¹è±¡å’Œç±»ï¼‰å’Œè™šæ‹Ÿè°ƒç”¨ä¼šå¢åŠ è¿è¡Œæ—¶é—´å¼€é”€ï¼Œé€šè¿‡å†…è”åŒ– lambda è¡¨è¾¾å¼å¯ä»¥æ¶ˆé™¤è¿™ç±»çš„å¼€é”€ã€‚</p>
</blockquote>

        </div>
        

<footer>
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn">Petrichor</span></span>
    
    <time>Apr 16, 2022</time>
    
      <span class="categories">
        Tags:
        
          <a class="category" href="https://chenyongda2018.github.io/tags/android">Android</a>  <a class="category" href="https://chenyongda2018.github.io/tags/kotlin">Kotlin</a>  
    
    </span>
  </p>

  

  <p class="meta">
    
        <a class="basic-alignment left" href="https://chenyongda2018.github.io/posts/android/glide_study/" title="Glideå­¦ä¹ ç¬”è®°">Glideå­¦ä¹ ç¬”è®°</a>
    

    
      <a class="basic-alignment right" href="https://chenyongda2018.github.io/posts/android/android_performance/" title="Androidæ€§èƒ½ä¼˜åŒ–æ–‡ç« ">Androidæ€§èƒ½ä¼˜åŒ–æ–‡ç« </a>
    
  </p>
  
</footer>

      </article>
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>

  
  



<ul class="sidebar-nav">
  <li class="sidebar-nav-item">
    <a target="_blank" rel="noopener noreferrer" href="https://github.com/chenyongda2018" title="https://github.com/chenyongda2018"><i class="fa fa-github fa-3x"></i></a>
    
    
    
    
    
    
    
    
    
    
    

  
  
  </li>
</ul>

  

  
    
      <section class="odd">
        
        
          <li>
            <a href="https://chenyongda2018.github.io/categories/" title="category" >category</a>
          </li>
        
          <li>
            <a href="https://chenyongda2018.github.io/about" title="About me" >About me</a>
          </li>
        
      </section>
    
  

  
  
  
    
      <section class="even">
        <h1>Recent Posts</h1>
        <ul id="recent_posts">
          
          
        </ul>
      </section>
    
  
</aside>

  </div>
</div>

    <footer role="contentinfo">
      <p>Copyright &copy; 2023 Petrichor - <a href="https://chenyongda2018.github.io/license/">License</a> -
        <span class="credit">Powered by <a target="_blank" href="https://gohugo.io" rel="noopener noreferrer">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/" rel="noopener noreferrer">Hugo-Octopress</a> theme.
      </p>
    </footer>

    
    



    
    
    

    
  </body>
</html>

