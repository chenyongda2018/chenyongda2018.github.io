<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Android | Petrichor&#39;s blog</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="Petrichor">
<link rel="canonical" href="http://localhost:1313/categories/android/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css" integrity="sha256-IhHKMWS&#43;eDACT2qtKzouUghDpk&#43;PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/categories/android/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/categories/android/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Petrichor&#39;s blog (Alt + H)">Petrichor&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="ä¸»é¡µ">
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Android
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Glideå­¦ä¹ ç¬”è®°
    </h2>
  </header>
  <div class="entry-content">
    <p>ä¸€.ä½¿ç”¨ 1.é…ç½®ä¾èµ– åœ¨ appÂ å±‚ build.gradleÂ ä¸­æ·»åŠ ä¾èµ– :Â dependencies { ... implementation &#39;com.github.bumptech.glide:glide:4.9.0&#39; annotationProcessor &#39;com.github.bumptech.glide:compiler:4.9.0&#39; annotationProcessor &#39;androidx.annotation:annotation:1.1.0&#39; ... } æ·»åŠ å¿…è¦æƒé™ :Â &lt;uses-permission android:name=&#34;android.permission.INTERNET&#34;/&gt; &lt;uses-permission android:name=&#34;android.permission.ACCESS_NETWORK_STATE&#34;/&gt; &lt;uses-permission android:name=&#34;android.permission.READ_EXTERNAL_STORAGE&#34; /&gt; &lt;uses-permission android:name=&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34; /&gt; 2.åˆæ­¥ä¸Šæ‰‹ ä»£ç  :Â Glide.with(context) .asBitmap() //æŠŠåŠ¨å›¾å½“ä½œé™æ­¢å›¾ç‰‡å¤„ç†,ä¹Ÿå°±æ˜¯åªæ˜¾ç¤ºgifå›¾çš„ç¬¬ä¸€å¸§ .load(&#34;https://pic2.zhimg.com/v2-c4970ee756c55333b7b871c5b617d9ed_b.gif&#34;)//å›¾ç‰‡url .placeholder(R.mipmap.ic_launcher) //å ä½ç¬¦,åœ¨åŠ è½½å›¾ç‰‡å®Œæˆä¹‹å‰æ˜¾ç¤ºçš„å›¾ç‰‡ .error(R.drawable.ic_launcher_background) //åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºçš„å›¾ç‰‡ .fitCenter() //å½“å›¾ç‰‡é•¿å®½å¤§äºImageViewæ—¶,ç¼©æ”¾å›¾ç‰‡ .fallback(R.mipmap.ic_launcher) //å›¾ç‰‡urlä¸ºNullæ—¶æ˜¾ç¤ºçš„å›¾ç‰‡ .into(image1); // æ”¾å…¥åˆ°ImageViewä¸­ æ•ˆæœå›¾ :
ğŸˆTips : fitCenter()ä¸CenterCrop()åŒºåˆ« :Â fitCenter() : æ•ˆæœå¦‚ä¸Šå›¾,ç¼©æ”¾åŸå›¾è‡³ImageViewå¤§å°ã€‚ CenterCrop():å¦‚ä¸‹å›¾,ä¿æŒåŸå›¾ä¸å˜ï¼Œåªæ ¹æ®ImageViewå¤§å°æ˜¾ç¤ºå¯¹åº”éƒ¨åˆ†ã€‚ 3.é…åˆRecyclerViewæ˜¾ç¤ºå›¾ç‰‡åˆ—è¡¨ 1.éœ€è¦åŠ è½½çš„å›¾ç‰‡urlæ•°æ®æº
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-11-14 20:13:19 +0800 CST'>November 14, 2019</span>&nbsp;Â·&nbsp;Petrichor</footer>
  <a class="entry-link" aria-label="post link to Glideå­¦ä¹ ç¬”è®°" href="http://localhost:1313/posts/android/glide_study/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">è®°ä¸€æ¬¡åœ¨Androidä¸­è°ƒç”¨ç™¾åº¦çš„OCRæ¥å£çš„ç»å†
    </h2>
  </header>
  <div class="entry-content">
    <p>å‰è¨€ æœ€è¿‘å®éªŒå®¤å¼€äº†ä¸ªæ–°é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªé€šè¿‡æ‰«æå•è¯åæŠŠæ‰«æè¿‡çš„å•è¯ç”Ÿæˆæ¸¸æˆæ¥è®©å°æœ‹å‹è®°å•è¯çš„APPï¼Œæ‰«æå•è¯è¿™ä¸ªåŠŸèƒ½éœ€è¦ç”¨åˆ°OCR.
ç°åœ¨å¸¸ç”¨çš„OCRæœ‰
Tesseract è¿™ä¸ªç”¨çš„äººæ¯”è¾ƒå¤šï¼Œè€Œä¸”å¼€æºï¼Œç›®å‰googleæ­£åœ¨ç»´æŠ¤ï¼Œä½†æ˜¯æˆ‘å°è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°è¯†åˆ«å‡†ç¡®ç‡ä¸æ˜¯ç‰¹åˆ«ç†æƒ³ã€‚
å¾®è½¯çš„Azureä¸Šçš„è®¤çŸ¥æœåŠ¡ è¯†åˆ«ç‡å¾ˆé«˜ï¼Œä½†æ˜¯æ”¶è´¹ï¼Œç°åœ¨æœ‰1å…ƒä½“éªŒçš„å¥—é¤ï¼Œè€Œä¸”ä¸éœ€è¦éªŒè¯ä¿¡ç”¨å¡ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è¯•è¯•ã€‚
ç™¾åº¦çš„æ–‡å­—è¯†åˆ« ä¹‹æ‰€ä»¥ç”¨è¿™ä¸ªæ˜¯å› ä¸ºå…è´¹ï¼Œä¸è¿‡æœ‰æ¯å¤©çš„é™åˆ¶æ¬¡æ•°ï¼Œå¯¹äºå­¦ç”Ÿé¡¹ç›®æ¥è¯´å¤Ÿç”¨ï¼Œè¿˜è¦ä»€ä¹ˆè‡ªè¡Œè½¦ã€‚
ä¸‹é¢è¿›å…¥æ­£æ–‡
å¦‚ä½•åœ¨Android ä¸­è°ƒç”¨ç™¾åº¦çš„OCRè¿›è¡Œæ–‡å­—è¯†åˆ« 1.è·å–ç™¾åº¦æ–‡å­—è¯†åˆ«äº§å“æœåŠ¡çš„ Ak/Sk 1.åœ¨ç™¾åº¦AIå¼€æ”¾å¹³å°ä¸­è¿›å…¥æ§åˆ¶å°
2.æ‰¾åˆ°æ–‡å­—è¯†åˆ« äº§å“æœåŠ¡
3,åˆ›å»ºåº”ç”¨
4,å¡«å†™ä¿¡æ¯ï¼Œæ³¨æ„è¿™é‡Œçš„åŒ…åä¸€å®šè¦å’Œé¡¹ç›®çš„åŒ…åä¸€è‡´
5.è·å¾—AK/SK
6.ä¸‹è½½licenseæ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ä¸­å¦‚æœç›´æ¥ç”¨AK/SKæ˜æ–‡è°ƒç”¨ç™¾åº¦çš„OCRï¼Œå¾ˆä¸å®‰å…¨ï¼Œå¯èƒ½ä¼šè¢«åˆ«äººåç¼–è¯‘ä¹‹åè·å¾—ä½ çš„AK.SK
licenseæ–‡ä»¶é›†æˆäº†AK/SK æ”¾åœ¨é¡¹ç›®ä¸­å¯ä»¥é˜²æ­¢åˆ«äººç ´è§£ã€‚ 7.ä¸‹è½½ä¹‹åå°†è·å¾—çš„api.licenseæ–‡ä»¶æ”¾å…¥mainç›®å½•ä¸‹çš„assetsç›®å½•ä¸­
2.æ·»åŠ ç™¾åº¦OCRçš„SDKåˆ°é¡¹ç›®ä¸­ 1.ä¸‹è½½ ç™¾åº¦OCRçš„android Sdk
2.ä¸‹è½½çš„SDKå‹ç¼©åŒ…å°†å…¶è§£å‹ï¼Œå¹¶å°†libsä¸‹çš„ocr-sdkçš„jaråŒ…æ”¾å…¥é¡¹ç›®çš„libsç›®å½•ä¸‹ 3.åœ¨mainç›®å½•ä¸‹æ–°å»ºjniLibsç›®å½•ï¼Œå¹¶å°†libsæ–‡ä»¶å¤¹ä¸­çš„å…¶ä»–æ–‡ä»¶æ”¾å…¥å…¶ä¸­
4.åœ¨appä¸‹çš„build,gradleä¸­æ·»åŠ 
å°†æ·»åŠ åœ¨libsä¸‹çš„sdk JARåŒ…ç¼–è¯‘
5.è¿™é‡Œä¸‹è½½çš„å‹ç¼©åŒ…ä¸­åŒ…æ‹¬äº†ç™¾åº¦æä¾›çš„ç›¸æœºæ‰«ææ—¶çš„UIï¼Œåœ¨æ‹å®Œç…§æœ‰è£å‰ªæ¡†ï¼Œæ¯”è¾ƒæ–¹ä¾¿ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½œä¸ºmoduleå¼•å…¥é¡¹ç›®ä¸­ 3.è°ƒç”¨ç™¾åº¦OCR åšå®Œå‡†å¤‡å·¥ä½œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è°ƒç”¨ç™¾åº¦çš„OCRæ¥å£äº†ã€‚
é¦–å…ˆåœ¨æˆ‘ä»¬éœ€è¦è¿›è¡Œè¯†åˆ«çš„é¡µé¢æ‰€åœ¨çš„æ–‡ä»¶ä¸­åˆ›å»º æ ¹æ®Licenseæ–‡ä»¶åˆå§‹åŒ–OCRå®ä¾‹çš„å‡½æ•°ï¼Œå¹¶åœ¨onCreate()æ–¹æ³•ä¸­è°ƒç”¨
/** * è‡ªå®šä¹‰licenseçš„æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶åç§°ï¼Œä»¥licenseæ–‡ä»¶æ–¹å¼åˆå§‹åŒ– */ private void initAccessTokenLicenseFile() { OCR.getInstance(mActivity.getApplicationContext()).initAccessToken(new OnResultListener&lt;AccessToken&gt;() { @Override public void onResult(AccessToken accessToken) { String token = accessToken.getAccessToken(); Log.d(TAG,token); hasGotToken = true; } @Override public void onError(OCRError error) { error.printStackTrace(); alertText(&#34;è‡ªå®šä¹‰æ–‡ä»¶è·¯å¾„licenceæ–¹å¼è·å–tokenå¤±è´¥&#34;, error.getMessage()); } }, &#34;aip.license&#34;, mActivity.getApplicationContext()); } ...</p>
  </div>
  <footer class="entry-footer"><span title='2019-05-10 20:25:04 +0800 CST'>May 10, 2019</span>&nbsp;Â·&nbsp;Petrichor</footer>
  <a class="entry-link" aria-label="post link to è®°ä¸€æ¬¡åœ¨Androidä¸­è°ƒç”¨ç™¾åº¦çš„OCRæ¥å£çš„ç»å†" href="http://localhost:1313/posts/android/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%9C%A8android%E4%B8%AD%E8%B0%83%E7%94%A8%E7%99%BE%E5%BA%A6%E7%9A%84ocr%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%BB%8F%E5%8E%86/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Androidæ¶ˆæ¯æœºåˆ¶å…¨é¢è§£æ
    </h2>
  </header>
  <div class="entry-content">
    <p>(1),Androidæ¶ˆæ¯æœºåˆ¶æ¦‚è¿° Androidä¸­çš„æ¶ˆæ¯æœºåˆ¶ä¸»è¦æŒ‡ Handlerçš„è¿è¡Œæœºåˆ¶ ä»¥åŠ MessageQueueï¼ŒLooperçš„å·¥ä½œè¿‡ç¨‹ ï¼Œä¸‰è€…ç›¸äº’åä½œï¼Œä¿è¯ç€æ¶ˆæ¯çš„æ¥æ”¶ï¼Œå‘é€ï¼Œå¤„ç†ï¼Œæ‰§è¡Œã€‚
â€‹ å›¾ç‰‡æ¥è‡ªéƒ­ç¥çš„ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹
å…ˆç®€å•çš„ä»‹ç»ä¸€ä¸‹ Android ä¸­ æ¶ˆæ¯æœºåˆ¶å¤§å®¶åº­çš„ä¸»è¦æˆå‘˜ :
Handler : æ˜¯Androidæ¶ˆæ¯æœºåˆ¶çš„ä¸Šå±‚æ¥å£ï¼Œæœ€ä¸ºå¤§å®¶å¸¸ç”¨ï¼Œç›¸å½“äºAndroidæ¶ˆæ¯æœºåˆ¶çš„å…¥å£ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨Handlerå‘é€æ¶ˆæ¯æ¥å¼•èµ·æ¶ˆæ¯æœºåˆ¶çš„å¾ªç¯ã€‚é€šå¸¸ç”¨äº:åœ¨å­çº¿ç¨‹æ‰§è¡Œå®Œè€—æ—¶ä»»åŠ¡å®Œåï¼Œæ›´æ–°UIã€‚
MessageQueue : å­˜å‚¨ æ¶ˆæ¯(Message) å¯¹è±¡çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå®åˆ™æ˜¯å•é“¾è¡¨ç»“æ„.
Looper : ç”¨äºæ— é™çš„ä» MessageQueueä¸­å–å‡ºæ¶ˆæ¯ï¼Œç›¸å½“äºæ¶ˆæ¯çš„æ°¸åŠ¨æœºï¼Œå¦‚æœæœ‰æ–°çš„æ¶ˆæ¯ï¼Œåˆ™å¤„ç†æ‰§è¡Œï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™å°±ä¸€ç›´ç­‰å¾…ï¼Œå µå¡ã€‚Looper** æ‰€åœ¨çš„çº¿ç¨‹æ˜¯ åˆ›å»º Handler æ—¶æ‰€åœ¨çš„çº¿ç¨‹ã€‚
ä¸»çº¿ç¨‹åˆ›å»ºHandleræ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªLooper,ä½†æ˜¯å­çº¿ç¨‹å¹¶ä¸ä¼šè‡ªåŠ¨åˆ›å»ºLooper
ThreadLocal : åœ¨æ¯ä¸ªçº¿ç¨‹äº’ä¸å¹²æ‰°çš„å­˜å‚¨ï¼Œæä¾›æ•°æ®ï¼Œä»¥æ­¤æ¥è·å–å½“å‰çº¿ç¨‹çš„Looper
ActivityThread : Android çš„ä¸»çº¿ç¨‹ï¼Œä¹Ÿå«UIçº¿ç¨‹ï¼Œä¸»çº¿ç¨‹è¢«åˆ›å»ºæ—¶ è‡ªåŠ¨åˆå§‹åŒ–ä¸»çº¿ç¨‹çš„ Looperå¯¹è±¡ã€‚
é—®é¢˜ : å¤§å®¶éƒ½çŸ¥é“åªæœ‰åœ¨UIçº¿ç¨‹æ‰èƒ½å¯¹UIå…ƒç´ è¿›è¡Œæ“ä½œï¼Œåœ¨å­çº¿ç¨‹æ›´æ”¹UIå°±ä¼šæŠ¥é”™ï¼Œä¸ºä»€ä¹ˆï¼Ÿ çœ‹å®Œã€ŠAndroidè‰ºæœ¯å¼€å‘æ¢ç´¢ã€‹ è¿™æœ¬ä¹¦çš„ç¬¬10ç« ä¹‹åæˆ‘ä¹Ÿæ‰æ˜ç™½
Androidä¸­çš„UIæ§ä»¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœåœ¨å­çº¿ç¨‹ä¸­ä¹Ÿèƒ½ä¿®æ”¹UIå…ƒç´ ï¼Œé‚£å¤šçº¿ç¨‹çš„æ—¶ï¼Œå…±åŒè®¿é—®åŒä¸€ä¸ªUIå…ƒç´ ï¼Œå°±ä¼šå¯¼è‡´è¿™ä¸ªUIå…ƒç´ å¤„äºæˆ‘ä»¬ä¸å¯é¢„çŸ¥çš„çŠ¶æ€ï¼Œè¿™ä¸ªçº¿ç¨‹è®©å®ƒå¾€å·¦ä¸€ç‚¹ï¼Œé‚£ä¸ªçº¿ç¨‹è®©å®ƒå¾€å³ä¸€ç‚¹ï¼ŒUIè¯¥å¬è°çš„ï¼Œå¥½tmä¹±ã€‚ã€‚ å¹²è„†æˆ‘å°±åªå¬ä¸»çº¿ç¨‹çš„æŠŠã€‚ é—®é¢˜ : é‚£ä¸ºä»€ä¹ˆä¸é€šè¿‡å¯¹è®¿é—®UIæ§ä»¶çš„å­çº¿ç¨‹åŠ ä¸Šé”æœºåˆ¶å‘¢ ï¼Ÿ è¿™ä¸ªå¾ˆç®€å•äº†ï¼Œå¦‚æœä¸ºä¸åŒçš„çº¿ç¨‹è®¿é—®åŒä¸€UIå…ƒç´ åŠ ä¸Šé”æœºåˆ¶ï¼Œé‚£æˆ‘ä»¬ç¨‹åºå‘˜å†™ç›¸å…³ä»£ç çš„æ—¶å€™ä¼šå˜å¾—è¶…çº§éº»çƒ¦ã€‚ã€‚ã€‚ æ”¹ä¸ªUIè¿˜å¾—è€ƒè™‘å®ƒæ˜¯ä¸æ˜¯å·²ç»è¢«åˆ«çš„çº¿ç¨‹å ç”¨äº†ï¼Œè¢«å ç”¨äº†ï¼Œè¿˜å¾—è®©é‚£ä¸ªçº¿ç¨‹é‡Šæ”¾é”ã€‚ã€‚ã€‚çº¿ç¨‹å†å¤šä¸€ç‚¹çš„è¯ï¼Œå¤§å¤§åœ°åŠ å¤§äº†ç¨‹åºå‘˜åœ°å·¥ä½œé‡.
è€Œä¸”åŠ ä¸Šé”æœºåˆ¶æ— ç–‘ä¼šç”±äºçº¿ç¨‹å µå¡åœ°åŸå› é™ä½è®¿é—®UIçš„æ•ˆç‡ï¼Œå¸§ç‡é™ä½ï¼Œä½“éªŒä¹Ÿä¼šä¸å‹å¥½ã€‚
è®©UIå…ƒç´ åªèƒ½å†ä¸»çº¿ç¨‹è®¿é—®å°±ä¼šçœä¸‹å¾ˆå¤šäº‹ï¼Œåˆ›å»ºä¸€ä¸ªHandlerå°±è¡Œäº†ã€‚
ä¸‹é¢ä»æ•´ä½“æ¦‚è¿°ä¸€ä¸‹ æ¶ˆæ¯æœºåˆ¶çš„æ•´ä¸ªå·¥ä½œè¿‡ç¨‹ :
Handler åˆ›å»ºæ—¶ä¼šé‡‡ç”¨å½“å‰çº¿ç¨‹çš„ Looperæ¥æ„å»ºå†…éƒ¨çš„æ¶ˆæ¯å¾ªç¯ç³»ç»Ÿï¼Œå¦‚æœHandleråœ¨å­çº¿ç¨‹ï¼Œåˆ™ä¸€å¼€å§‹æ˜¯æ²¡æœ‰Looperå¯¹è±¡çš„(è§£å†³æ–¹æ³•ç¨åä»‹ç»)ï¼Œä¸»çº¿ç¨‹ActivityThreadé»˜è®¤æœ‰ä¸€ä¸ªLooperã€‚
Handleråˆ›å»ºå®Œæ¯•ï¼Œé€šè¿‡ postæ–¹æ³•ä¼ å…¥Runnableå¯¹è±¡ï¼Œæˆ–è€…é€šè¿‡sendMessage(Message msg)å‘é€æ¶ˆæ¯ã€‚
post()æ–¹æ³•é‡Œä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨send()å®ç°çš„
send()æ–¹æ³•è¢«è°ƒç”¨åï¼Œè°ƒç”¨ MessageQueueçš„enqueueMessage()æ–¹æ³•å°†æ¶ˆæ¯å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…è¢«å¤„ç†ã€‚
Looperå¯¹è±¡è¿è¡Œåœ¨Handleræ‰€åœ¨çš„çº¿ç¨‹ï¼Œä»MessageQueueæ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸æ–­åœ°å–å‡ºæ¶ˆæ¯ï¼Œå¤„ç†ï¼Œæ‰€ä»¥ä¸šåŠ¡é€»è¾‘(é€šå¸¸æ˜¯æ›´æ–°UI)å°±è¿è¡Œåœ¨Looperçš„çº¿ç¨‹ä¸­ã€‚
æ¥ä¸‹æ¥ä»å±€éƒ¨æ¥åˆ†ææ¶ˆæ¯æœºåˆ¶çš„æ¯ä¸ªæˆå‘˜ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-04-19 20:27:16 +0800 CST'>April 19, 2019</span>&nbsp;Â·&nbsp;Petrichor</footer>
  <a class="entry-link" aria-label="post link to Androidæ¶ˆæ¯æœºåˆ¶å…¨é¢è§£æ" href="http://localhost:1313/posts/android/android%E6%B6%88%E6%81%AF%E6%9C%BA%E5%88%B6%E5%85%A8%E9%9D%A2%E8%A7%A3%E6%9E%90/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="http://localhost:1313/categories/android/">
      Â«&nbsp;Prev&nbsp;
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Petrichor&#39;s blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
